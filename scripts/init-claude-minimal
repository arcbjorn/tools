#!/bin/bash

# Initialize minimal Claude Code configuration
set -e

echo "Initializing minimal Claude Code setup..."

echo "COMMIT INSTRUCTIONS: use conventional commits guidelines, 1 GRANULAR COMMIT PER 1 GOAL, MESSAG 50 CHARACTERS MAX, DESCRIPTION 70 CHARACTERS MAX" > CLAUDE.md ; echo "
### Always Use Standard CLI Tools for Initialization
- **Go Backend**: Use \`go mod init\` to initialize Go modules
- **React Frontend**: Use \`pnpm create vite@latest my-app -- --template react\`
- **Alpine.js**: \`pnpm init vite@latest my-alpine-app -- --template vanilla-ts\`
- ALWAYS use \`pnpm\` instead of \`npm\`
- ALWAYS use Typescript instead of Javascript
- **Svelte**: \`npx sv create my-app\`
- **Rust**: \`cargo new\`, \`cargo add\`
- **Zig**: \`zig init\`
- **Never manually create package.json or go.mod files**
- **ALWAYS use official scaffolding tools\`" >> CLAUDE.md

# Create or update .gitignore
if [ -f .gitignore ]; then
    # Check if CLAUDE.md is already ignored
    if ! grep -q "CLAUDE.md" .gitignore; then
        echo "CLAUDE.md" >> .gitignore
        echo "Added CLAUDE.md to existing .gitignore"
    else
        echo "CLAUDE.md already in .gitignore"
    fi
else
    # Create new .gitignore
    echo "CLAUDE.md" > .gitignore
    echo "Created .gitignore with CLAUDE.md"
fi

echo "Claude Code minimal setup complete!"
echo "- CLAUDE.md created with commit instructions"
echo "- CLAUDE.md added to .gitignore"
